@model List<TCViettetlFC_Client.Models.MatchViewModel>

@{
    ViewBag.Title = "Xem trận đấu";
    Layout = "_LayoutCommon";
}

<section class="innerpage_all_wrap bg-white">
    <div class=container>
        <div class=row>
            <div class="spacewithtop" style="padding-top:7.5%"></div>
            <h2 class=heading>Trải nghiệm bóng đá đỉnh cao<span>- Đặt vé ngay hôm nay!</span></h2>

            <p class=headParagraph>
                Chào mừng bạn đến với hệ thống bán vé trực tuyến chính thức của sân vận động! 
                Tận hưởng những trận cầu đỉnh cao cùng đội bóng yêu thích. 
                Dễ dàng chọn chỗ ngồi, đặt vé nhanh chóng và an toàn chỉ với vài thao tác. 
                Đừng bỏ lỡ cơ hội hòa mình vào không khí sôi động trên khán đài!
            </p>

            <div class=innerWrapper>
                <aside class="widgetinner clearfix">
                    <div class=widgetinfowrap>
                        <div class=bg-blackimg>Tại sao đặt vé với chúng tôi?</div>
                        <ul class="widgetinfo info01">
                            <li>Đảm bảo gửi vé qua mail không chập trễ</li>
                            <li>Thân thiện với người dùng</li>
                            <li>Đảm bảo thanh toán</li>
                            <li>Website dành riêng cho câu lạc bộ</li>
                        </ul>
                        <a href="https://vi.wikipedia.org/wiki/C%C3%A2u_l%E1%BA%A1c_b%E1%BB%99_b%C3%B3ng_%C4%91%C3%A1_Th%E1%BB%83_C%C3%B4ng_%E2%80%93_Viettel" 
                        class=blacklrnmore>
                        Thông tin về câu lạc bộ
                        </a>
                    </div>
                    <div class=widgetinfowrap>
                        <div class=bg-blackimg>Ưu đãi giảm giá đồ tặng kèm</div>
                        <ul class="widgetinfo info02">
                            <li>Có phục vụ đồ ăn</li>
                            <li>Có Đồ cổ vũ giúp </li>
                            <li>Tiền đồ bán được sẽ giúp ủng hộ CLB</li>
                            <li>Tiền vé bán được sẽ giúp ủng hộ CLB</li>
                        </ul>
                    </div>
                    <div class=widgetinfowrap>
                        <div class=bg-blackimg>Đỡ áp lực về tinh thần </div>
                        <ul class="widgetinfo info02">
                            <li>Giảm áp lực tại điểm bán vé trực tiếp</li>
                            <li>Khả năng đặt vé sớm và giữ chỗ</li>
                        </ul>
                    </div>
                    <div class=widgetinfowrap>
                        <div class=bg-blackimg>Tích hợp công nghệ hiện đại</div>
                        <ul class="widgetinfo info02">
                            <li>QR code để check-in nhanh tại sân vận động, giảm thời gian chờ đợi.</li>
                        </ul>
                    </div>
                    <div class=widgetinfowrap>
                        <div class=bg-blackimg>Ưu đãi và khuyến mãi</div>
                        <ul class="widgetinfo info02">
                            <li>Nhận giảm giá cho các mặt hàng của CLB.</li>
                        </ul>
                        
                    </div>
                </aside>
                <aside class=contentinner>
                    <div class="bg-red headline01">Danh sách các trận đấu</div>
                    @if (Model.Any())
                    {
                        <ul class="ticketInfo">
                            @{
                                int counter = 1; // Biến đếm bắt đầu từ 1
                                DateTime currentDateTime = DateTime.Now;
                            }
                            @foreach (var match in Model)
                            {
                                <li>
                                    <ul class="t_info headline01 clearfix">
                                        <li>@counter</li> <!-- Số sẽ tự động tăng ở đây -->
                                        <li>
                                            <div class="headline01 clearfix">
                                                <span>VIETTEL FC</span><span class="vs">vs</span> <span>@match.OpponentName</span>
                                            </div>
                                            <div class="ticketInner_info paragraph02 clearfix">
                                                <span>@(match.MatchDate.HasValue ? match.MatchDate.Value.ToString("dd/MM/yyyy") : "")</span>
                                                <span>@(match.MatchDate.HasValue ? match.MatchDate.Value.ToString("hh:mm tt") : "")</span> <span class="capitalize01">@match.StadiumName</span>
                                            </div>
                                        </li>
                                        @if (match.MatchDate.HasValue)
                                        {
                                            var matchDateTime = match.MatchDate.Value;

                                            // Kiểm tra nếu trận đấu là ngày hôm nay và còn 10 tiếng đến giờ thi đấu
                                            if ((matchDateTime.Date - currentDateTime.Date).TotalDays <= 3)
                                            {
                                                <li><a href="@Url.Action("Index", "Area", new { matchId = match.Id })" class="btn-small01 btn-green">Đặt vé</a></li>
                                            }
                                            else if (matchDateTime.Date == currentDateTime.Date && (matchDateTime - currentDateTime).TotalHours >= 0.5)
                                            {
                                                <li><span class="btn-small01 btn-yellow" style="color: orangered;">Ngưng bán</span></li>
                                            }
                                            // Kiểm tra nếu trận đấu cách hôm nay 3 ngày
                                            else if ( (matchDateTime.Date - currentDateTime.Date).TotalDays > 3 )
                                            {
                                                <li><span class="btn-small01 btn-yellow" style="color: burlywood;margin: auto;">Sắp mở bán</span></li>
                                            }
                                        }
                                        else
                                        {
                                        <li><span class="btn-small01 btn-grey">Ngày không xác định</span></li>
                                        }
                                    </ul>
                                </li>

                                counter++; // Tăng giá trị của biến đếm sau mỗi vòng lặp
                            }
                        </ul>
                    }
                    else
                    {
                        <h4 style="text-align:center">Không tải được trận đấu</h4>
                    }


                    <div class=center><a href=# class=vm-book>view more</a></div>
                    <div class=buymatchticket>
                        <div class=bg-red><h5>Cách đặt vé cho trận đấu</h5></div>
                        <div class=ticktbody>
                            <p>
                                Bấm vào nút đặt vé trên danh sách trận đấu sắp diễn ra
                            </p>

                            <p>
                                Bấm vào vị trí của sân bóng mà bạn muốn ngồi để xem tình trạng số vé 
                            </p>

                            <p>
                                Chọn thêm đồ đính kèm và thanh toán 
                            </p>

                            <div class=socialTicket>
                                <a href="https://www.facebook.com/thecongviettelfc"
                                   class="social_link facebook">
                                    <i class="fa fa-facebook"></i>
                                </a> <a href=https://twitter.com/
                                        class="social_link twitter">
                                    <i class="fa fa-twitter"></i>
                                </a> <a href=https://www.behance.net/
                                        class="social_link behance">
                                    <i class="fa fa-behance"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </aside>
            </div>
        </div>
    </div>
</section>
